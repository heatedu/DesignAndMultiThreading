cmake_minimum_required(VERSION 3.10)
project(BookMyShow)

# Set C++ standard
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Include directories
include_directories(${CMAKE_SOURCE_DIR})

# Collect all source files by category
file(GLOB MODEL_SOURCES "src/models/*.cpp")
file(GLOB PROVIDER_SOURCES "src/providers/*.cpp")
file(GLOB SERVICE_SOURCES "src/services/*.cpp")
file(GLOB CONTROLLER_SOURCES "src/controllers/*.cpp")
file(GLOB PAYMENT_SOURCES "src/payment/*.cpp")

# Collect all header files by category
file(GLOB ENUM_HEADERS "include/enums/*.h")
file(GLOB MODEL_HEADERS "include/models/*.h")
file(GLOB PROVIDER_HEADERS "include/providers/*.h")
file(GLOB SERVICE_HEADERS "include/services/*.h")
file(GLOB CONTROLLER_HEADERS "include/controllers/*.h")
file(GLOB PAYMENT_HEADERS "include/payment/*.h")

# Combine all sources
set(ALL_SOURCES
    ${MODEL_SOURCES}
    ${PROVIDER_SOURCES}
    ${SERVICE_SOURCES}
    ${CONTROLLER_SOURCES}
    ${PAYMENT_SOURCES}
)

# Combine all headers
set(ALL_HEADERS
    ${ENUM_HEADERS}
    ${MODEL_HEADERS}
    ${PROVIDER_HEADERS}
    ${SERVICE_HEADERS}
    ${CONTROLLER_HEADERS}
    ${PAYMENT_HEADERS}
)

# Add executable
add_executable(BookMyShow 
    main.cpp
    ${ALL_SOURCES}
    ${ALL_HEADERS}
)

# Create Visual Studio source groups (filters)
source_group("Source Files" FILES main.cpp)
source_group("Source Files\\Models" FILES ${MODEL_SOURCES})
source_group("Source Files\\Providers" FILES ${PROVIDER_SOURCES})
source_group("Source Files\\Services" FILES ${SERVICE_SOURCES})
source_group("Source Files\\Controllers" FILES ${CONTROLLER_SOURCES})
source_group("Source Files\\Payment" FILES ${PAYMENT_SOURCES})

source_group("Header Files\\Enums" FILES ${ENUM_HEADERS})
source_group("Header Files\\Models" FILES ${MODEL_HEADERS})
source_group("Header Files\\Providers" FILES ${PROVIDER_HEADERS})
source_group("Header Files\\Services" FILES ${SERVICE_HEADERS})
source_group("Header Files\\Controllers" FILES ${CONTROLLER_HEADERS})
source_group("Header Files\\Payment" FILES ${PAYMENT_HEADERS})

# For Windows threading support
if(WIN32)
    target_link_libraries(BookMyShow)
else()
    target_link_libraries(BookMyShow pthread)
endif()

# Set output directory
set_target_properties(BookMyShow PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin
)

