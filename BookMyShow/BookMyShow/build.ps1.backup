# PowerShell build script for BookMyShow

Write-Host "=== Building BookMyShow ===" -ForegroundColor Green

# Clean previous build
if (Test-Path build) {
    Write-Host "Cleaning previous build..." -ForegroundColor Yellow
    Remove-Item build -Recurse -Force
}

# Create build directory
Write-Host "Creating build directory..." -ForegroundColor Yellow
mkdir build | Out-Null
cd build

# Configure with CMake
Write-Host "Configuring with CMake..." -ForegroundColor Yellow
cmake ..

if ($LASTEXITCODE -ne 0) {
    Write-Host "CMake configuration failed!" -ForegroundColor Red
    exit 1
}

# Build
Write-Host "Building project..." -ForegroundColor Yellow
cmake --build . --config Release

if ($LASTEXITCODE -ne 0) {
    Write-Host "Build failed!" -ForegroundColor Red
    exit 1
}

Write-Host ""
Write-Host "=== Build Successful ===" -ForegroundColor Green
Write-Host ""
Write-Host "To run the application:" -ForegroundColor Cyan
Write-Host "  cd build\Release" -ForegroundColor Cyan
Write-Host "  .\BookMyShow.exe" -ForegroundColor Cyan
Write-Host ""

# Ask if user wants to run
$run = Read-Host "Do you want to run the application now? (Y/N)"
if ($run -eq 'Y' -or $run -eq 'y') {
    Write-Host ""
    Write-Host "=== Running BookMyShow ===" -ForegroundColor Green
    Write-Host ""
    .\Release\BookMyShow.exe
}

